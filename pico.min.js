window.I=document;function loadScript(e,t){var n,o,a=I,c="script";o=a.createElement(c),n=a.getElementsByTagName(c)[0],o.async=1,o.src=e,o.onload=function(){t()},o.onerror=function(){t(new Error("failed to load: "+e))},n.parentNode.insertBefore(o,n)}var lel=I.getElementById("loading"),gameId=window.location.hash.split("#")[1].split("/")[0];function onKeyDown_blocker(e){e=e||window.event;var t=I.activeElement;t&&t!=I.body&&"canvas"!=t.tagName||[32,37,38,39,40].indexOf(e.keyCode)>-1&&e.preventDefault&&e.preventDefault()}loadScript("carts/"+gameId+".js",function(e){e?lel.innerText=e:lel.style.display="none"});var pico8_buttons=[0,0,0,0,0,0,0,0];function press_pico8_button(e,t,n){0==n?pico8_buttons[e]&=~(1<<t):pico8_buttons[e]|=1<<t}I.addEventListener("keydown",onKeyDown_blocker,!1);var canvas=I.getElementById("canvas");canvas.width=window.innerWidth,canvas.height=window.innerHeight;var Module={};Module.canvas=canvas;var mb=0;function abs(e){return e<0?-e:e}function pico8_buttons_event(e,t){pico8_buttons[0]=0,I.getElementById("touch_controls").style.display="";var n=0;e.touches&&(n=e.touches.length);for(var o=0;o<n;o++){var a,c=(a=e.touches[o]).clientX,d=a.clientY,i=I.body.clientWidth,s=I.body.clientHeight;if(b=0,c<i/2){mask=15;deadzone=15;var r=c-70,u=d-(s-70);abs(r)>.8*abs(u)&&(r<-deadzone&&(b|=1),r>deadzone&&(b|=2)),abs(u)>.8*abs(r)&&(u<-deadzone&&(b|=4),u>deadzone&&(b|=8))}else mask=48,(r=c-i/2)*r+(u=d-(s-20))*u<2500?b|=64:(s-d>.8*(i-c)&&(b|=16),i-c>.8*(s-d)&&(b|=32));pico8_buttons[0]|=b}}var touch_detected=!1;addEventListener("touchstart",function(e){touch_detected=!0,pico8_buttons_event(e,0)},!1),addEventListener("touchmove",function(e){pico8_buttons_event(e,1)},!1),addEventListener("touchend",function(e){pico8_buttons_event(e,2)},!1);